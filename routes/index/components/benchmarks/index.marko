import benchData from './data';

class {
    constructor() {
        this.state = {
            index:0
        }
    }
    switchBench(index) {
        this.state.index = index;
    }
}

$ var benchmark = benchData[state.index];

<div.benchmarks>
    <h2.title>Re<strong>marko</strong>able performance across the board</h2>
    <div.tabs>
        <for(i, bench in benchData)>
            <div.tab class={ selected:i === state.index } on-click('switchBench', i)>
                ${bench.name}
            </div>
        </for>
    </div>
    <div.charts>
        $ var max = Math.max.apply(null, benchData.map(r => r.max));
        $ var width = 80 / benchmark.results.length + '%';
        $ var localMax = (max+benchmark.max)/2;
        <for(environment in benchmark.results)>
            <benchmark-chart max=localMax width=width environment=environment results=environment.results/>
        </for>
    </div>
    <h3>${benchmark.name} details</h3>
    <div.description>$!{benchmark.description} <a href="https://github.com/marko-js/isomorphic-ui-benchmarks">View the code on GitHub</a></div>
</div>

style {
    .benchmarks {
        width:100%;
        padding:2em;
    }
    .benchmarks .charts {
        flex-direction:row;
        justify-content:space-between;
        width:100%;
        padding:2em;
        margin-top:4em;
    }
    .benchmarks h2.title {
        margin-bottom:1rem;
        text-align:center;
    }
    .benchmarks h2.title strong {
        color:#d04;
    }
    .benchmarks .tabs {
        flex-direction:row;
        justify-content:center;
        border-top:2px solid #e4e6e8;
        padding:0 1em;
    }
    .benchmarks .tab {
        border:0;
        border-top:2px solid #e4e6e8;
        font-size:0.8em;
        margin-top:-2px;
        background:#fff;
        color:#727476;
        cursor:pointer;
        outline:0;
        padding:1em;
        position:relative;
    }
    .benchmarks .tab.selected {
        border-top:2px solid #d04;
        color:#d04;
    }
    .benchmarks .tab.selected:after {
        content:'';
        border:0.5em solid transparent;
        border-top-color:#d04;
        position:absolute;
        top:0;
        left:50%;
        margin-left:-0.5em;
    }
    .benchmarks .description p {
        margin-top:1em;
    }
}